
<%require 'nokogiri'%>
<%page = Nokogiri::HTML(open("/home/erez/Downloads/findacoach/coachnew/app/views/reviews/new.html.erb"))%>
<p>please give your review</p>

<h2>rate the service</h2>
<div class="starbox">
          <div class="star" data-star="1"><i class="fa fa-star"></i></div>
          <div class="star" data-star="2"><i class="fa fa-star"></i></div>
          <div class="star" data-star="3"><i class="fa fa-star"></i></div>
          <div class="star" data-star="4"><i class="fa fa-star"></i></div>
          <div class="star" data-star="5"><i class="fa fa-star"></i></div>




       <div class="input_form">
    <%= simple_form_for [@trainer, @booking, @review] do |f| %>


    <p>title</p>
    <div><%= f.input :title,:label => false%></div>
    <p>write down your review</p>
    <div><%= f.input :content,:label => false%></div>



    <div id="rate" name="7"><%= f.input :score, :collection => %w[1 2 3 4 5],as: :hidden, :value => @review.score%></div>
    <%#= f.input :score,:label => false,:input_html => { :value => '2' }, id: "scorefield" ,name: "scoreinput", type: "text" %>
    <div id="score">
    </div>

    <div class ="score" data-star="" ></div>



    <%= f.button :submit,'submit', class: "btn btn-primary booking_btn" %>
    <% end %>
  </div>

       <style>

    .starbox{
     width: 15vw;
     display: flex;
   }

  .star{
     cursor: pointer;
   }



    </style>






      <script>



    let score = document.querySelector('.score')

    let rating = document.querySelector('#score')





 document.querySelectorAll('.starbox').forEach(function(starbox){
   Array.from(starbox.children).forEach(function(star){


     star.addEventListener('click', function(){

      let dropdown = document.querySelector('#review_score');
       if(star.dataset.star == "1"){
         Array.from(star.parentNode.children).forEach(function(starrr){
           starrr.style.color = "black"

           star.style.color = "#ffd530";
          dropdown.value = 1


         })

       }

       else if(star.dataset.star == "2"){
          Array.from(star.parentNode.children).forEach(function(starrr){
           starrr.style.color = "black"
           dropdown.value = 2
         })
          star.style.color = "#ffd530";
          star.parentNode.children[0].style.color = "#ffd530";
       }
       else if(star.dataset.star == "3"){
          Array.from(star.parentNode.children).forEach(function(starrr){
           starrr.style.color = "black"
           dropdown.value = 3
         })
          star.style.color = "#ffd530";
          star.parentNode.children[0].style.color = "#ffd530";
          star.parentNode.children[1].style.color = "#ffd530";
       }
       else if(star.dataset.star == "4"){
          Array.from(star.parentNode.children).forEach(function(starrr){
           starrr.style.color = "black"
           dropdown.value = 4
         })
          star.style.color = "#ffd530";
          star.parentNode.children[0].style.color = "#ffd530";
          star.parentNode.children[1].style.color = "#ffd530";
          star.parentNode.children[2].style.color = "#ffd530";
       }
       else if(star.dataset.star == "5"){
          Array.from(star.parentNode.children).forEach(function(starrr){
           starrr.style.color = "black"
           dropdown.value = 5
         })
           star.style.color = "#ffd530";
          star.parentNode.children[0].style.color = "#ffd530";
          star.parentNode.children[1].style.color = "#ffd530";
          star.parentNode.children[2].style.color = "#ffd530";
          star.parentNode.children[3].style.color = "#ffd530";
       }
     });
   });

 });



    window.onload = function(){

    let good = document.querySelector('.good');
    let rate = document.querySelector('#rate');
    let inscore = document.querySelector('#inscore');
    // let dropdown = document.querySelector('#review_score');
    // alert(dropdown.value);



    }




</script>
